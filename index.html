<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MEU Timi»ôoara 2026 ‚Äî Certificate Portal</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;0,700;1,400&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <!-- pdf-lib -->
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

  <style>
    /* ‚îÄ‚îÄ Design tokens ‚îÄ‚îÄ */
    :root {
      --navy:   #0d2151;
      --navy2:  #1a3a7c;
      --gold:   #d4a843;
      --gold2:  #f0c96b;
      --white:  #ffffff;
      --offwhite: #f5f7fc;
      --muted:  #8592b0;
      --border: #d1d9ef;
      --success: #1f8c5e;
      --radius: 14px;
      --shadow: 0 4px 32px rgba(13,33,81,.12);
      --shadow-lg: 0 12px 60px rgba(13,33,81,.18);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Outfit', sans-serif;
      background: var(--offwhite);
      color: var(--navy);
      min-height: 100vh;
    }

    /* ‚îÄ‚îÄ Stars pattern ‚îÄ‚îÄ */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        radial-gradient(circle at 15% 25%, rgba(212,168,67,.07) 0%, transparent 50%),
        radial-gradient(circle at 85% 75%, rgba(26,58,124,.06) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    /* ‚îÄ‚îÄ Header / Hero ‚îÄ‚îÄ */
    .hero {
      background: linear-gradient(135deg, var(--navy) 0%, var(--navy2) 60%, #1e3d8f 100%);
      position: relative;
      overflow: hidden;
      padding: 60px 24px 80px;
      text-align: center;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: -80px; right: -80px;
      width: 320px; height: 320px;
      border: 2px solid rgba(212,168,67,.15);
      border-radius: 50%;
    }
    .hero::after {
      content: '';
      position: absolute;
      bottom: -60px; left: -60px;
      width: 240px; height: 240px;
      border: 2px solid rgba(212,168,67,.1);
      border-radius: 50%;
    }

    /* EU Stars ring */
    .stars-ring {
      display: flex;
      justify-content: center;
      gap: 6px;
      margin-bottom: 28px;
      flex-wrap: wrap;
      max-width: 300px;
      margin-left: auto;
      margin-right: auto;
    }
    .star {
      color: var(--gold);
      font-size: 18px;
      animation: starPulse 3s ease-in-out infinite;
    }
    .star:nth-child(2)  { animation-delay: .2s; }
    .star:nth-child(3)  { animation-delay: .4s; }
    .star:nth-child(4)  { animation-delay: .6s; }
    .star:nth-child(5)  { animation-delay: .8s; }
    .star:nth-child(6)  { animation-delay: 1s; }
    .star:nth-child(7)  { animation-delay: 1.2s; }
    .star:nth-child(8)  { animation-delay: 1.4s; }
    .star:nth-child(9)  { animation-delay: 1.6s; }
    .star:nth-child(10) { animation-delay: 1.8s; }
    .star:nth-child(11) { animation-delay: 2s; }
    .star:nth-child(12) { animation-delay: 2.2s; }

    @keyframes starPulse {
      0%, 100% { opacity: .5; transform: scale(1); }
      50%       { opacity: 1;  transform: scale(1.15); }
    }

    .hero-badge {
      display: inline-block;
      background: rgba(212,168,67,.15);
      border: 1px solid rgba(212,168,67,.4);
      color: var(--gold2);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 3px;
      text-transform: uppercase;
      padding: 6px 18px;
      border-radius: 999px;
      margin-bottom: 20px;
    }

    .hero h1 {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 700;
      font-size: clamp(2.2rem, 6vw, 3.8rem);
      color: var(--white);
      line-height: 1.1;
      margin-bottom: 12px;
    }

    .hero h1 span {
      color: var(--gold2);
    }

    .hero p {
      color: rgba(255,255,255,.65);
      font-size: clamp(.9rem, 2.5vw, 1.05rem);
      font-weight: 300;
      max-width: 500px;
      margin: 0 auto 32px;
      line-height: 1.7;
    }

    .hero-dates {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.15);
      border-radius: 999px;
      padding: 10px 24px;
      color: rgba(255,255,255,.85);
      font-size: .88rem;
      font-weight: 500;
      letter-spacing: .5px;
    }
    .hero-dates::before {
      content: 'üìÖ';
      font-size: 1rem;
    }

    /* ‚îÄ‚îÄ Step indicators ‚îÄ‚îÄ */
    .step-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0;
      padding: 32px 24px 0;
      position: relative;
      z-index: 1;
    }

    .step-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .step-num {
      width: 42px; height: 42px;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-weight: 700;
      font-size: .95rem;
      transition: all .3s;
      border: 2px solid var(--border);
      background: var(--white);
      color: var(--muted);
      box-shadow: var(--shadow);
    }

    .step-num.active {
      background: var(--navy);
      border-color: var(--navy);
      color: var(--white);
      box-shadow: 0 4px 20px rgba(13,33,81,.3);
    }

    .step-num.done {
      background: var(--success);
      border-color: var(--success);
      color: var(--white);
    }

    .step-label {
      font-size: .75rem;
      font-weight: 600;
      letter-spacing: .5px;
      text-transform: uppercase;
      color: var(--muted);
      white-space: nowrap;
    }

    .step-label.active { color: var(--navy); }

    .step-connector {
      width: 80px; height: 2px;
      background: var(--border);
      margin: 0 8px;
      margin-bottom: 30px;
      transition: background .3s;
    }

    .step-connector.done { background: var(--success); }

    /* ‚îÄ‚îÄ Main content ‚îÄ‚îÄ */
    .main {
      max-width: 680px;
      margin: 0 auto;
      padding: 40px 20px 80px;
      position: relative;
      z-index: 1;
    }

    /* ‚îÄ‚îÄ Cards ‚îÄ‚îÄ */
    .card {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 36px;
      border: 1px solid var(--border);
      animation: fadeUp .5s ease both;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .card-header {
      margin-bottom: 28px;
    }

    .card-tag {
      display: inline-block;
      background: rgba(13,33,81,.07);
      color: var(--navy2);
      font-size: .72rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-transform: uppercase;
      padding: 4px 12px;
      border-radius: 999px;
      margin-bottom: 10px;
    }

    .card h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(1.5rem, 4vw, 2rem);
      font-weight: 700;
      color: var(--navy);
      margin-bottom: 6px;
    }

    .card p.subtitle {
      color: var(--muted);
      font-size: .9rem;
      font-weight: 300;
      line-height: 1.6;
    }

    /* ‚îÄ‚îÄ Form ‚îÄ‚îÄ */
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    @media (max-width: 500px) {
      .form-row { grid-template-columns: 1fr; }
      .card { padding: 24px 18px; }
      .step-connector { width: 40px; }
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 18px;
    }

    .form-group:last-of-type { margin-bottom: 0; }

    label {
      font-size: .8rem;
      font-weight: 600;
      color: var(--navy);
      letter-spacing: .3px;
      text-transform: uppercase;
    }

    label .req {
      color: var(--gold);
      margin-left: 2px;
    }

    input, select {
      width: 100%;
      padding: 12px 16px;
      border: 1.5px solid var(--border);
      border-radius: 10px;
      font-family: 'Outfit', sans-serif;
      font-size: .95rem;
      color: var(--navy);
      background: var(--white);
      transition: border-color .2s, box-shadow .2s;
      outline: none;
      appearance: none;
    }

    input:focus, select:focus {
      border-color: var(--navy2);
      box-shadow: 0 0 0 3px rgba(26,58,124,.12);
    }

    input.caps {
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 1px;
      font-size: 1rem;
    }

    input.caps::placeholder {
      text-transform: none;
      font-weight: 400;
      letter-spacing: 0;
      color: #b0b8cc;
    }

    select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%230d2151' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 14px center;
      padding-right: 40px;
      cursor: pointer;
    }

    .input-hint {
      font-size: .75rem;
      color: var(--muted);
      font-weight: 400;
      margin-top: 2px;
    }

    .input-hint.warn {
      color: #c0392b;
      font-weight: 500;
    }

    /* Name length indicator */
    .name-meter {
      height: 3px;
      border-radius: 999px;
      background: var(--border);
      margin-top: 6px;
      overflow: hidden;
    }
    .name-meter-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--gold), var(--navy2));
      transition: width .3s;
      width: 0%;
    }

    /* ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 28px;
      border-radius: 10px;
      font-family: 'Outfit', sans-serif;
      font-size: .95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all .2s;
      border: none;
      width: 100%;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--navy) 0%, var(--navy2) 100%);
      color: var(--white);
      box-shadow: 0 4px 16px rgba(13,33,81,.28);
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(13,33,81,.35);
    }
    .btn-primary:active { transform: translateY(0); }

    .btn-gold {
      background: linear-gradient(135deg, var(--gold) 0%, #c4922e 100%);
      color: var(--white);
      box-shadow: 0 4px 16px rgba(212,168,67,.35);
    }
    .btn-gold:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(212,168,67,.45);
    }

    .btn-outline {
      background: transparent;
      border: 1.5px solid var(--border);
      color: var(--navy);
    }
    .btn-outline:hover {
      border-color: var(--navy2);
      background: rgba(13,33,81,.04);
    }

    .btn-row {
      display: flex;
      gap: 12px;
      margin-top: 28px;
    }

    .btn-row .btn { flex: 1; }

    /* ‚îÄ‚îÄ Section divider ‚îÄ‚îÄ */
    .divider {
      display: flex;
      align-items: center;
      gap: 14px;
      margin: 24px 0;
    }
    .divider::before, .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }
    .divider span {
      font-size: .75rem;
      font-weight: 600;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--muted);
      white-space: nowrap;
    }

    /* ‚îÄ‚îÄ Privacy note ‚îÄ‚îÄ */
    .privacy-note {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      background: rgba(13,33,81,.04);
      border: 1px solid rgba(13,33,81,.08);
      border-radius: 10px;
      padding: 14px 16px;
      margin-top: 20px;
    }
    .privacy-note .icon { font-size: 1rem; flex-shrink: 0; margin-top: 1px; }
    .privacy-note p {
      font-size: .8rem;
      color: var(--muted);
      line-height: 1.5;
    }

    /* ‚îÄ‚îÄ Success banner ‚îÄ‚îÄ */
    .success-banner {
      display: flex;
      align-items: center;
      gap: 12px;
      background: rgba(31,140,94,.08);
      border: 1px solid rgba(31,140,94,.25);
      border-radius: 10px;
      padding: 14px 18px;
      margin-bottom: 24px;
    }
    .success-banner .icon { font-size: 1.3rem; }
    .success-banner p {
      font-size: .88rem;
      color: var(--success);
      font-weight: 500;
      line-height: 1.4;
    }

    /* ‚îÄ‚îÄ Preview box ‚îÄ‚îÄ */
    .preview-box {
      background: var(--offwhite);
      border: 1.5px dashed var(--border);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      min-height: 90px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
      margin-top: 20px;
      transition: all .3s;
    }

    .preview-box.has-content {
      border-color: var(--gold);
      background: rgba(212,168,67,.04);
    }

    .preview-name {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 700;
      color: var(--navy);
      transition: font-size .3s;
      line-height: 1.2;
      word-break: break-word;
    }

    .preview-label {
      font-size: .75rem;
      font-weight: 600;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--muted);
    }

    .preview-representing {
      font-size: .95rem;
      font-weight: 600;
      color: var(--navy2);
      margin-top: 4px;
      font-style: italic;
    }

    /* ‚îÄ‚îÄ Loading spinner ‚îÄ‚îÄ */
    .spinner {
      display: inline-block;
      width: 18px; height: 18px;
      border: 2px solid rgba(255,255,255,.35);
      border-top-color: var(--white);
      border-radius: 50%;
      animation: spin .7s linear infinite;
      flex-shrink: 0;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ‚îÄ‚îÄ Hidden ‚îÄ‚îÄ */
    .hidden { display: none !important; }

    /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
    footer {
      text-align: center;
      padding: 32px 20px;
      color: var(--muted);
      font-size: .8rem;
      position: relative;
      z-index: 1;
    }

    footer span { color: var(--gold); }

    /* ‚îÄ‚îÄ Responsive tweaks ‚îÄ‚îÄ */
    @media (max-width: 400px) {
      .hero h1 { font-size: 1.9rem; }
      .step-label { font-size: .65rem; }
    }
  </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<header class="hero">
  <div class="stars-ring">
    <span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span>
    <span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span>
    <span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span>
    <span class="star">‚òÖ</span><span class="star">‚òÖ</span><span class="star">‚òÖ</span>
  </div>
  <div class="hero-badge">Certificate Portal</div>
  <h1>Model European Union<br /><span>Timi»ôoara 2026</span></h1>
  <p>Register for the first edition and generate your official participation certificate.</p>
  <div class="hero-dates">25th ‚Äì 29th March 2026 ¬∑ Timi»ôoara, Romania</div>
</header>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STEP BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="step-bar">
  <div class="step-item" onclick="goToStep(1)">
    <div class="step-num active" id="s1">1</div>
    <div class="step-label active" id="sl1">Registration</div>
  </div>
  <div class="step-connector" id="sc1"></div>
  <div class="step-item" onclick="goToStep(2)">
    <div class="step-num" id="s2">2</div>
    <div class="step-label" id="sl2">Certificate</div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<main class="main">

  <!-- ‚îÄ‚îÄ STEP 1: Registration ‚îÄ‚îÄ -->
  <div id="step1" class="card">
    <div class="card-header">
      <div class="card-tag">Step 1 of 2</div>
      <h2>Participant Registration</h2>
      <p class="subtitle">Fill in your details to participate in MEU Timi»ôoara 2026. Your certificate will be generated after registration.</p>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>First Name <span class="req">*</span></label>
        <input type="text" id="reg-first" placeholder="Maria" autocomplete="given-name" />
      </div>
      <div class="form-group">
        <label>Last Name <span class="req">*</span></label>
        <input type="text" id="reg-last" placeholder="Ionescu" autocomplete="family-name" />
      </div>
    </div>

    <div class="form-group">
      <label>Institutional Email <span class="req">*</span></label>
      <input type="email" id="reg-email" placeholder="maria.ionescu@university.ro" autocomplete="email" />
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>University / Institution <span class="req">*</span></label>
        <input type="text" id="reg-uni" placeholder="UVT Timi»ôoara" />
      </div>
      <div class="form-group">
        <label>Country <span class="req">*</span></label>
        <select id="reg-country">
          <option value="">Select country‚Ä¶</option>
          <option>Romania</option>
          <option>Germany</option>
          <option>France</option>
          <option>Italy</option>
          <option>Spain</option>
          <option>Hungary</option>
          <option>Poland</option>
          <option>Netherlands</option>
          <option>Belgium</option>
          <option>Other</option>
        </select>
      </div>
    </div>

    <div class="form-group" style="margin-bottom:0">
      <label>Role / Committee <span class="req">*</span></label>
      <select id="reg-role">
        <option value="">Select your role‚Ä¶</option>
        <option>Delegate</option>
        <option>Chair</option>
        <option>Vice-Chair</option>
        <option>Rapporteur</option>
        <option>Observer</option>
        <option>Press Corps</option>
        <option>Organiser</option>
      </select>
    </div>

    <div class="privacy-note">
      <span class="icon">üîí</span>
      <p>Your data is used exclusively for this event and certificate generation. No information is stored on external servers.</p>
    </div>

    <div class="btn-row">
      <button class="btn btn-primary" onclick="submitRegistration()">
        Register &amp; Continue ‚Üí
      </button>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ STEP 2: Certificate Generator ‚îÄ‚îÄ -->
  <div id="step2" class="card hidden">
    <div class="success-banner">
      <span class="icon">‚úÖ</span>
      <p>Registration complete! You can now generate your official certificate.</p>
    </div>

    <div class="card-header">
      <div class="card-tag">Step 2 of 2</div>
      <h2>Generate Your Certificate</h2>
      <p class="subtitle">Enter your full name exactly as it should appear on the certificate, then select what you are representing.</p>
    </div>

    <div class="form-group">
      <label>Full Name on Certificate <span class="req">*</span></label>
      <input
        type="text"
        id="cert-name"
        class="caps"
        placeholder="e.g. MARIA IONESCU"
        maxlength="50"
        oninput="onNameInput(this)"
      />
      <div class="name-meter"><div class="name-meter-fill" id="nameMeter"></div></div>
      <div class="input-hint" id="nameHint">Type in uppercase ¬∑ max 50 characters</div>
    </div>

    <div class="form-group">
      <label>Representing <span class="req">*</span></label>
      <select id="cert-representing">
        <option value="">Select what you represent‚Ä¶</option>
        <option value="TEST COMMITTEE 1">Test Committee 1</option>
        <option value="TEST COMMITTEE 2">Test Committee 2</option>
        <option value="TEST COMMITTEE 3">Test Committee 3</option>
        <option value="TEST COMMITTEE 4">Test Committee 4</option>
        <option value="TEST COMMITTEE 5">Test Committee 5</option>
        <option value="TEST COUNTRY 1">Test Country 1</option>
        <option value="TEST COUNTRY 2">Test Country 2</option>
        <option value="TEST COUNTRY 3">Test Country 3</option>
      </select>
      <div class="input-hint">This will appear as your represented delegation / committee</div>
    </div>

    <!-- Live Preview -->
    <div id="previewBox" class="preview-box">
      <div class="preview-label">Preview</div>
      <div id="previewName" class="preview-name" style="font-size:1.4rem;">‚Äî</div>
      <div id="previewRep" class="preview-representing hidden"></div>
    </div>

    <div class="btn-row">
      <button class="btn btn-outline" onclick="goToStep(1)" style="flex:0 0 auto;width:auto;padding:14px 20px;">‚Üê Back</button>
      <button class="btn btn-gold" id="downloadBtn" onclick="generatePDF()">
        Download Certificate ‚Üì
      </button>
    </div>

    <div class="divider"><span>Under the patronage of the European Parliament</span></div>

    <p style="text-align:center;font-size:.8rem;color:var(--muted);line-height:1.6;">
      The certificate will be issued in PDF format and signed by<br />
      <strong style="color:var(--navy);">Viorel Lambu</strong> ¬∑ Director General &nbsp;&amp;&nbsp;
      <strong style="color:var(--navy);">Paula Iovescu</strong> ¬∑ Project Manager
    </p>
  </div>

</main>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<footer>
  <p>Model European Union Timi»ôoara 2026 &nbsp;¬∑&nbsp; <span>‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ</span></p>
  <p style="margin-top:6px;">Universitatea de Vest din Timi»ôoara ¬∑ Faculty of Governance and Communication Sciences</p>
</footer>

<script>
  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     STEP NAVIGATION
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  function goToStep(n) {
    document.getElementById('step1').classList.toggle('hidden', n !== 1);
    document.getElementById('step2').classList.toggle('hidden', n !== 2);

    // Update step indicators
    const s1 = document.getElementById('s1');
    const s2 = document.getElementById('s2');
    const sc = document.getElementById('sc1');
    const sl1 = document.getElementById('sl1');
    const sl2 = document.getElementById('sl2');

    if (n === 1) {
      s1.className = 'step-num active';   sl1.className = 'step-label active';
      s2.className = 'step-num';          sl2.className = 'step-label';
      sc.className = 'step-connector';
    } else {
      s1.className = 'step-num done';     sl1.className = 'step-label';
      s2.className = 'step-num active';   sl2.className = 'step-label active';
      sc.className = 'step-connector done';
    }

    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     REGISTRATION (fake submit)
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  function submitRegistration() {
    const first    = document.getElementById('reg-first').value.trim();
    const last     = document.getElementById('reg-last').value.trim();
    const email    = document.getElementById('reg-email').value.trim();
    const uni      = document.getElementById('reg-uni').value.trim();
    const country  = document.getElementById('reg-country').value;
    const role     = document.getElementById('reg-role').value;

    if (!first || !last || !email || !uni || !country || !role) {
      shake(event.target);
      alert('Please fill in all required fields.');
      return;
    }

    // Pre-fill name on cert page
    const certName = document.getElementById('cert-name');
    certName.value = (first + ' ' + last).toUpperCase();
    onNameInput(certName);

    goToStep(2);
  }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     NAME INPUT ‚Äî uppercase + preview
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  function onNameInput(el) {
    // Force uppercase
    const start = el.selectionStart;
    el.value = el.value.toUpperCase();
    el.setSelectionRange(start, start);

    const len = el.value.length;
    const max = 50;

    // Meter
    document.getElementById('nameMeter').style.width = (len / max * 100) + '%';

    // Hint
    const hint = document.getElementById('nameHint');
    if (len > 40) {
      hint.textContent = `${max - len} characters remaining`;
      hint.className = 'input-hint warn';
    } else {
      hint.textContent = 'Type in uppercase ¬∑ max 50 characters';
      hint.className = 'input-hint';
    }

    updatePreview();
  }

  document.getElementById('cert-representing').addEventListener('change', updatePreview);

  function updatePreview() {
    const name = document.getElementById('cert-name').value.trim();
    const rep  = document.getElementById('cert-representing').value;
    const box  = document.getElementById('previewBox');
    const pn   = document.getElementById('previewName');
    const pr   = document.getElementById('previewRep');

    if (name) {
      box.classList.add('has-content');
      pn.textContent = name;

      // Dynamic font size based on name length
      const len = name.length;
      if      (len <= 16) pn.style.fontSize = '2rem';
      else if (len <= 24) pn.style.fontSize = '1.6rem';
      else if (len <= 34) pn.style.fontSize = '1.3rem';
      else                pn.style.fontSize = '1.05rem';
    } else {
      box.classList.remove('has-content');
      pn.textContent = '‚Äî';
      pn.style.fontSize = '1.4rem';
    }

    if (rep) {
      pr.textContent = rep;
      pr.classList.remove('hidden');
    } else {
      pr.classList.add('hidden');
    }
  }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     PDF GENERATION
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  async function generatePDF() {
    const name = document.getElementById('cert-name').value.trim();
    const rep  = document.getElementById('cert-representing').value;

    if (!name) { alert('Please enter your full name for the certificate.'); return; }
    if (!rep)  { alert('Please select what you are representing.'); return; }

    const btn = document.getElementById('downloadBtn');
    btn.innerHTML = '<span class="spinner"></span> Generating‚Ä¶';
    btn.disabled = true;

    try {
      const { PDFDocument, rgb, StandardFonts } = PDFLib;

      // Load template PDF
      const templateBytes = await fetch('Diploma__1_.pdf').then(r => {
        if (!r.ok) throw new Error('Template PDF not found. Make sure Diploma__1_.pdf is in the same folder.');
        return r.arrayBuffer();
      });

      const pdfDoc = await PDFDocument.load(templateBytes);
      const page   = pdfDoc.getPages()[0];
      const { width, height } = page.getSize();

      // Embed a clean font
      const fontBold   = await pdfDoc.embedFont(StandardFonts.HelveticaBold);
      const fontRegular = await pdfDoc.embedFont(StandardFonts.Helvetica);

      // ‚îÄ‚îÄ Dynamic font size for name based on length ‚îÄ‚îÄ
      const nameLen = name.length;
      let nameFontSize;
      if      (nameLen <= 14) nameFontSize = 26;
      else if (nameLen <= 20) nameFontSize = 22;
      else if (nameLen <= 28) nameFontSize = 18;
      else if (nameLen <= 36) nameFontSize = 15;
      else                    nameFontSize = 13;

      // ‚îÄ‚îÄ Center text helper ‚îÄ‚îÄ
      function centerX(text, font, size) {
        const w = font.widthOfTextAtSize(text, size);
        return (width - w) / 2;
      }

      // ‚îÄ‚îÄ Color ‚îÄ‚îÄ
      const blue = rgb(0.051, 0.133, 0.318); // #0d2251 navy

      // ‚îÄ‚îÄ NAME (on the line below "Recognized") ‚îÄ‚îÄ
      const nameY = 926;
      page.drawText(name, {
        x: centerX(name, fontBold, nameFontSize),
        y: nameY,
        size: nameFontSize,
        font: fontBold,
        color: blue,
      });

      // ‚îÄ‚îÄ REPRESENTING (on the line below "Representing") ‚îÄ‚îÄ
      const repFontSize = rep.length > 22 ? 15 : 18;
      const repY = 707;
      page.drawText(rep, {
        x: centerX(rep, fontBold, repFontSize),
        y: repY,
        size: repFontSize,
        font: fontBold,
        color: blue,
      });

      // Save + trigger download
      const pdfBytes  = await pdfDoc.save();
      const blob      = new Blob([pdfBytes], { type: 'application/pdf' });
      const url       = URL.createObjectURL(blob);
      const a         = document.createElement('a');
      a.href          = url;
      a.download      = `Certificate_MEU_Timisoara_2026_${name.replace(/\s+/g, '_')}.pdf`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      btn.innerHTML = '‚úì Certificate Downloaded!';
      setTimeout(() => {
        btn.innerHTML = 'Download Certificate ‚Üì';
        btn.disabled = false;
      }, 3000);

    } catch (err) {
      console.error(err);
      alert('Error generating certificate:\n' + err.message);
      btn.innerHTML = 'Download Certificate ‚Üì';
      btn.disabled = false;
    }
  }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SHAKE animation for validation
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  function shake(el) {
    el.style.animation = 'none';
    el.offsetHeight; // reflow
    el.style.animation = 'shake .4s ease';
  }
</script>

<style>
@keyframes shake {
  0%,100% { transform: translateX(0); }
  20%      { transform: translateX(-8px); }
  40%      { transform: translateX(8px); }
  60%      { transform: translateX(-5px); }
  80%      { transform: translateX(5px); }
}
</style>

</body>
</html>
